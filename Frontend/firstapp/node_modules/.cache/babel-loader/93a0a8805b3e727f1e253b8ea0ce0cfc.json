{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pallavi\\\\Desktop\\\\React\\\\firstapp\\\\src\\\\components\\\\userboard\\\\OrderDetails.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport CheckoutForm from \"./CheckoutForm\"; // Make sure you create this file\n\nconst stripePromise = loadStripe(\"pk_test_XXXXXXXXXXXXXXXXXXXXXXXX\"); // üîÅ Use your real test key\n\nconst OrderDetails = () => {\n  const {\n    orderId\n  } = useParams();\n  const history = useHistory();\n  const [order, setOrder] = useState(null);\n  const [clientSecret, setClientSecret] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  useEffect(() => {\n    const fetchOrderAndIntent = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          setErrorMsg(\"‚ö†Ô∏è You must be logged in to view this page.\");\n          return;\n        }\n        const response = await axios.get(`http://localhost:8080/api/payments/${orderId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setOrder(response.data);\n        const intentRes = await axios.post(\"http://localhost:8080/api/payments/create-payment-intent\", {\n          orderId: response.data.orderId\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        setClientSecret(intentRes.data.clientSecret); // ‚≠ê Required to render payment screen\n      } catch (error) {\n        setErrorMsg(\"‚ùå Failed to load order or payment details.\");\n        console.error(error);\n      }\n    };\n    fetchOrderAndIntent();\n  }, [orderId]);\n  if (errorMsg) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"red\",\n        textAlign: \"center\",\n        marginTop: \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, errorMsg), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => history.push(\"/\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, \"Go Back\"));\n  }\n  if (!order || !clientSecret) {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        textAlign: \"center\",\n        marginTop: \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Order Details\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"300px\",\n      backgroundColor: \"#f0f0f0\",\n      padding: \"15px\",\n      borderRadius: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: order.imageUrl,\n    alt: order.artworkTitle,\n    style: {\n      width: \"100%\",\n      height: \"200px\",\n      objectFit: \"cover\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, order.artworkTitle), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 12\n    }\n  }, \"Artist:\"), \" \", order.artistName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 12\n    }\n  }, \"Price:\"), \" \\u20B9\", order.price), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 12\n    }\n  }, \"Status:\"), \" \", order.status)), /*#__PURE__*/React.createElement(Elements, {\n    stripe: stripePromise,\n    options: {\n      clientSecret\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CheckoutForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  })));\n};\nexport default OrderDetails;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","useHistory","loadStripe","Elements","CheckoutForm","stripePromise","OrderDetails","orderId","history","order","setOrder","clientSecret","setClientSecret","errorMsg","setErrorMsg","fetchOrderAndIntent","token","localStorage","getItem","response","get","headers","Authorization","data","intentRes","post","error","console","createElement","style","color","textAlign","marginTop","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","push","padding","width","backgroundColor","borderRadius","src","imageUrl","alt","artworkTitle","height","objectFit","artistName","price","status","stripe","options"],"sources":["C:/Users/Pallavi/Desktop/React/firstapp/src/components/userboard/OrderDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport CheckoutForm from \"./CheckoutForm\"; // Make sure you create this file\r\n\r\nconst stripePromise = loadStripe(\"pk_test_XXXXXXXXXXXXXXXXXXXXXXXX\"); // üîÅ Use your real test key\r\n\r\nconst OrderDetails = () => {\r\n  const { orderId } = useParams();\r\n  const history = useHistory();\r\n  const [order, setOrder] = useState(null);\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchOrderAndIntent = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n          setErrorMsg(\"‚ö†Ô∏è You must be logged in to view this page.\");\r\n          return;\r\n        }\r\n\r\n        const response = await axios.get(`http://localhost:8080/api/payments/${orderId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        setOrder(response.data);\r\n\r\n        const intentRes = await axios.post(\r\n          \"http://localhost:8080/api/payments/create-payment-intent\",\r\n          { orderId: response.data.orderId },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }\r\n        );\r\n\r\n        setClientSecret(intentRes.data.clientSecret); // ‚≠ê Required to render payment screen\r\n      } catch (error) {\r\n        setErrorMsg(\"‚ùå Failed to load order or payment details.\");\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    fetchOrderAndIntent();\r\n  }, [orderId]);\r\n\r\n  if (errorMsg) {\r\n    return (\r\n      <div style={{ color: \"red\", textAlign: \"center\", marginTop: \"50px\" }}>\r\n        <h2>{errorMsg}</h2>\r\n        <button onClick={() => history.push(\"/\")}>Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!order || !clientSecret) {\r\n    return <h2 style={{ textAlign: \"center\", marginTop: \"50px\" }}>Loading...</h2>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>Order Details</h2>\r\n      <div style={{ width: \"300px\", backgroundColor: \"#f0f0f0\", padding: \"15px\", borderRadius: \"10px\" }}>\r\n        <img src={order.imageUrl} alt={order.artworkTitle} style={{ width: \"100%\", height: \"200px\", objectFit: \"cover\" }} />\r\n        <h3>{order.artworkTitle}</h3>\r\n        <p><strong>Artist:</strong> {order.artistName}</p>\r\n        <p><strong>Price:</strong> ‚Çπ{order.price}</p>\r\n        <p><strong>Status:</strong> {order.status}</p>\r\n      </div>\r\n\r\n      {/* ‚≠ê Stripe payment screen */}\r\n      <Elements stripe={stripePromise} options={{ clientSecret }}>\r\n        <CheckoutForm />\r\n      </Elements>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}