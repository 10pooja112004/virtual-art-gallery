{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pallavi\\\\Desktop\\\\React\\\\firstapp\\\\src\\\\components\\\\board\\\\Dashboard.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { jwtDecode } from \"jwt-decode\";\nconst Dashboard = () => {\n  const [user, setUser] = useState(null);\n  const history = useHistory(); // ✅ Use useHistory instead of useNavigate\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      history.push(\"/login\"); // ✅ Redirect using history.push\n      return;\n    }\n    try {\n      const decodedToken = jwtDecode(token);\n      setUser(decodedToken);\n      axios.get(\"http://localhost:8080/api/users/profile\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => setUser(res.data)).catch(() => history.push(\"/login\")); // ✅ Redirect on error\n    } catch (error) {\n      localStorage.removeItem(\"token\");\n      history.push(\"/login\"); // ✅ Redirect if token is invalid\n    }\n  }, [history]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }, \"Welcome, \", user ? user.name : \"User\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, \"Username: \", user ? user.username : \"\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, \"Role: \", user ? user.role : \"\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      localStorage.removeItem(\"token\");\n      history.push(\"/login\"); // ✅ Redirect after logout\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, \"Logout\"));\n};\nexport default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","useHistory","jwtDecode","Dashboard","user","setUser","history","token","localStorage","getItem","push","decodedToken","get","headers","Authorization","then","res","data","catch","error","removeItem","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","name","username","role","onClick"],"sources":["C:/Users/Pallavi/Desktop/React/firstapp/src/components/board/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nconst Dashboard = () => {\r\n  const [user, setUser] = useState(null);\r\n  const history = useHistory(); // ✅ Use useHistory instead of useNavigate\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      history.push(\"/login\"); // ✅ Redirect using history.push\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const decodedToken = jwtDecode(token);\r\n      setUser(decodedToken);\r\n      \r\n      axios.get(\"http://localhost:8080/api/users/profile\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      })\r\n      .then((res) => setUser(res.data))\r\n      .catch(() => history.push(\"/login\")); // ✅ Redirect on error\r\n    } catch (error) {\r\n      localStorage.removeItem(\"token\");\r\n      history.push(\"/login\"); // ✅ Redirect if token is invalid\r\n    }\r\n  }, [history]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Welcome, {user ? user.name : \"User\"}</h2>\r\n      <p>Username: {user ? user.username : \"\"}</p>\r\n      <p>Role: {user ? user.role : \"\"}</p>\r\n      <button onClick={() => { \r\n        localStorage.removeItem(\"token\"); \r\n        history.push(\"/login\"); // ✅ Redirect after logout\r\n      }}>\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,SAAS,QAAQ,YAAY;AAEtC,MAAMC,SAAS,GAAGA,CAAA,KAAM;EACtB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAMO,OAAO,GAAGL,UAAU,CAAC,CAAC,CAAC,CAAC;;EAE9BH,SAAS,CAAC,MAAM;IACd,MAAMS,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVD,OAAO,CAACI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;MACxB;IACF;IAEA,IAAI;MACF,MAAMC,YAAY,GAAGT,SAAS,CAACK,KAAK,CAAC;MACrCF,OAAO,CAACM,YAAY,CAAC;MAErBX,KAAK,CAACY,GAAG,CAAC,yCAAyC,EAAE;QACnDC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUP,KAAK;QAAG;MAC9C,CAAC,CAAC,CACDQ,IAAI,CAAEC,GAAG,IAAKX,OAAO,CAACW,GAAG,CAACC,IAAI,CAAC,CAAC,CAChCC,KAAK,CAAC,MAAMZ,OAAO,CAACI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdX,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC;MAChCd,OAAO,CAACI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC1B;EACF,CAAC,EAAE,CAACJ,OAAO,CAAC,CAAC;EAEb,oBACET,KAAA,CAAAwB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACE9B,KAAA,CAAAwB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,WAAS,EAACvB,IAAI,GAAGA,IAAI,CAACwB,IAAI,GAAG,MAAW,CAAC,eAC7C/B,KAAA,CAAAwB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,YAAU,EAACvB,IAAI,GAAGA,IAAI,CAACyB,QAAQ,GAAG,EAAM,CAAC,eAC5ChC,KAAA,CAAAwB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,QAAM,EAACvB,IAAI,GAAGA,IAAI,CAAC0B,IAAI,GAAG,EAAM,CAAC,eACpCjC,KAAA,CAAAwB,aAAA;IAAQU,OAAO,EAAEA,CAAA,KAAM;MACrBvB,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC;MAChCd,OAAO,CAACI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC1B,CAAE;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAEK,CACL,CAAC;AAEV,CAAC;AAED,eAAexB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}