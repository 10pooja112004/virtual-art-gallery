{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pallavi\\\\Desktop\\\\React\\\\firstapp\\\\src\\\\components\\\\userboard\\\\OrderDetails.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useParams, useHistory } from \"react-router-dom\";\nconst OrderDetails = () => {\n  const {\n    orderId\n  } = useParams();\n  const history = useHistory();\n  const [order, setOrder] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  useEffect(() => {\n    const fetchOrder = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          setErrorMsg(\"⚠️ You must be logged in to view this page.\");\n          return;\n        }\n\n        // 1️⃣ Fetch payment/order details\n        const response = await axios.get(`http://localhost:8080/api/payments/${orderId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setOrder(response.data);\n\n        // 2️⃣ Create payment intent after fetching order\n        const intentRes = await axios.post(\"http://localhost:8080/api/payments/create-payment-intent\", {\n          orderId: response.data.orderId\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        console.log(\"✅ Payment Intent created:\", intentRes.data);\n      } catch (error) {\n        console.error(\"❌ Failed to fetch order or create payment intent:\", error);\n        if (error.response && error.response.status === 403) {\n          setErrorMsg(\"❌ Access Denied: You are not authorized to view this order.\");\n        } else if (error.response && error.response.status === 404) {\n          setErrorMsg(\"❌ Order not found.\");\n        } else {\n          setErrorMsg(\"❌ Something went wrong while loading order details.\");\n        }\n      }\n    };\n    if (orderId) {\n      fetchOrder();\n    }\n  }, [orderId]);\n  if (errorMsg) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginTop: \"50px\",\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, errorMsg), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => history.push(\"/\"),\n      style: {\n        marginTop: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, \"Go Back\"));\n  }\n  if (!order) {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        textAlign: \"center\",\n        marginTop: \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, \"Loading order details...\");\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"Order Details\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"300px\",\n      padding: \"15px\",\n      borderRadius: \"10px\",\n      backgroundColor: \"#f0f0f0\",\n      boxShadow: \"0 4px 8px rgba(0,0,0,0.1)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: order.imageUrl,\n    alt: order.artworkTitle,\n    style: {\n      width: \"100%\",\n      height: \"200px\",\n      objectFit: \"cover\",\n      borderRadius: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, order.artworkTitle), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"Artist:\"), \" \", order.artistName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, \"Price:\"), \" \\u20B9\", order.price), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, \"Date:\"), \" \", new Date(order.createdAt).toLocaleDateString()), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, \"Transaction ID:\"), \" \", order.transactionId), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Status:\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: order.status === \"COMPLETED\" ? \"green\" : order.status === \"PENDING\" ? \"orange\" : \"red\",\n      fontWeight: \"bold\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, order.status))));\n};\nexport default OrderDetails;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","useHistory","OrderDetails","orderId","history","order","setOrder","errorMsg","setErrorMsg","fetchOrder","token","localStorage","getItem","response","get","headers","Authorization","data","intentRes","post","console","log","error","status","createElement","style","textAlign","marginTop","color","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","push","padding","width","borderRadius","backgroundColor","boxShadow","src","imageUrl","alt","artworkTitle","height","objectFit","artistName","price","Date","createdAt","toLocaleDateString","transactionId","fontWeight"],"sources":["C:/Users/Pallavi/Desktop/React/firstapp/src/components/userboard/OrderDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nconst OrderDetails = () => {\r\n  const { orderId } = useParams();\r\n  const history = useHistory();\r\n  const [order, setOrder] = useState(null);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchOrder = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n          setErrorMsg(\"⚠️ You must be logged in to view this page.\");\r\n          return;\r\n        }\r\n\r\n        // 1️⃣ Fetch payment/order details\r\n        const response = await axios.get(\r\n          `http://localhost:8080/api/payments/${orderId}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          }\r\n        );\r\n        setOrder(response.data);\r\n\r\n        // 2️⃣ Create payment intent after fetching order\r\n        const intentRes = await axios.post(\r\n          \"http://localhost:8080/api/payments/create-payment-intent\",\r\n          {\r\n            orderId: response.data.orderId,\r\n          },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }\r\n        );\r\n\r\n        console.log(\"✅ Payment Intent created:\", intentRes.data);\r\n      } catch (error) {\r\n        console.error(\"❌ Failed to fetch order or create payment intent:\", error);\r\n\r\n        if (error.response && error.response.status === 403) {\r\n          setErrorMsg(\"❌ Access Denied: You are not authorized to view this order.\");\r\n        } else if (error.response && error.response.status === 404) {\r\n          setErrorMsg(\"❌ Order not found.\");\r\n        } else {\r\n          setErrorMsg(\"❌ Something went wrong while loading order details.\");\r\n        }\r\n      }\r\n    };\r\n\r\n    if (orderId) {\r\n      fetchOrder();\r\n    }\r\n  }, [orderId]);\r\n\r\n  if (errorMsg) {\r\n    return (\r\n      <div style={{ textAlign: \"center\", marginTop: \"50px\", color: \"red\" }}>\r\n        <h2>{errorMsg}</h2>\r\n        <button onClick={() => history.push(\"/\")} style={{ marginTop: \"20px\" }}>\r\n          Go Back\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!order) {\r\n    return (\r\n      <h2 style={{ textAlign: \"center\", marginTop: \"50px\" }}>\r\n        Loading order details...\r\n      </h2>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>Order Details</h2>\r\n      <div\r\n        style={{\r\n          width: \"300px\",\r\n          padding: \"15px\",\r\n          borderRadius: \"10px\",\r\n          backgroundColor: \"#f0f0f0\",\r\n          boxShadow: \"0 4px 8px rgba(0,0,0,0.1)\",\r\n        }}\r\n      >\r\n        <img\r\n          src={order.imageUrl}\r\n          alt={order.artworkTitle}\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"200px\",\r\n            objectFit: \"cover\",\r\n            borderRadius: \"8px\",\r\n          }}\r\n        />\r\n        <h3>{order.artworkTitle}</h3>\r\n        <p>\r\n          <strong>Artist:</strong> {order.artistName}\r\n        </p>\r\n        <p>\r\n          <strong>Price:</strong> ₹{order.price}\r\n        </p>\r\n        <p>\r\n          <strong>Date:</strong>{\" \"}\r\n          {new Date(order.createdAt).toLocaleDateString()}\r\n        </p>\r\n        <p>\r\n          <strong>Transaction ID:</strong> {order.transactionId}\r\n        </p>\r\n        <p>\r\n          <strong>Status:</strong>{\" \"}\r\n          <span\r\n            style={{\r\n              color:\r\n                order.status === \"COMPLETED\"\r\n                  ? \"green\"\r\n                  : order.status === \"PENDING\"\r\n                  ? \"orange\"\r\n                  : \"red\",\r\n              fontWeight: \"bold\",\r\n            }}\r\n          >\r\n            {order.status}\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}